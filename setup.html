<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="css/featured.css" keep>
    <link rel="stylesheet" href="css/navbar.css" keep>
    <link rel="stylesheet" href="css/styles.css" keep>
    <link rel="stylesheet" href="css/banner.css" keep>
    <link rel="stylesheet" href="https://unpkg.com/@ivteplo/utilities.css@1.0.0/build/main.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
  
    <title>setup.app</title>
    <script src="https://kit.fontawesome.com/a5ae6c00ff.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/framework7-icons@5/css/framework7-icons.min.css"></script>
    <link rel="manifest" href="manifest.json">
    
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#121212">
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" href="iphonex_splash.png">
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="iphonex_splash.png">
    
<!-- PushAlert -->
<script type="text/javascript">
        (function(d, t) {
                var g = d.createElement(t),
                s = d.getElementsByTagName(t)[0];
                g.src = "https://cdn.pushalert.co/integrate_8d0f3fb974f3c466c91728b39e7f2a4a.js";
                s.parentNode.insertBefore(g, s);
        }(document, "script"));
</script>
<!-- End PushAlert -->
    
</head>
<body>
<style>
    body {
        background-color: #1c0026;
    }
</style>
<div class="UIContainer">
  
<div class="welcomeheader">
<img class="welcomeimg" src="img/AppBox.png">
</div>
<h1 id="welcome">Welcome</h1>
<h4 id="toitweakhub">To iTweakHub</h4>
    <center>
    <form id="accountForm">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required>
        <br>
        <label for="profilePic">Profile picture:</label>
        <input type="file" accept="image/*" id="profilePic" name="profilePic" required>
        </center>
        <br>
         <div class="bottom-choices">   
             <button id="done" type="submit" class="login" onclick="window.location.href='setup/color.html';">Done</button>
    </form>

</div> 
    
</div>  
  <div id="appPage" class="page" style="background-color: #f7f7f8">
    <div class="page-content">
      <div class="block">
        <div class="instruction-row">
          <div class="icon-col">
            <i class="f7-icons">compass</i>
          </div>
          <div class="instruction-col">
            <p>Open this page in Safari</p>
          </div>
        </div>
        <div class="instruction-row">
          <div class="icon-col">
            <i class="f7-icons">square_arrow_up</i>
          </div>
          <div class="instruction-col">
            <p>Click the "Share" button</p>
          </div>
        </div>
        <div class="instruction-row">
          <div class="icon-col">
            <i class="f7-icons">plus_square</i>
          </div>
          <div class="instruction-col">
            <p>
Choose “On Home Screen” from the options.</p>
          </div>
        </div>
        <div class="instruction-row">
          <div class="icon-col">
            <i class="f7-icons">checkmark_alt_circle</i>
          </div>
          <div class="instruction-col">
            <p>Tap "Add to Home Screen"</p>
          </div>
        </div>
      </div>
    </div>
  </div>
    <script>
const accountForm = document.getElementById('accountForm');

accountForm.addEventListener('submit', function(event) {
    event.preventDefault();
    const usernameInput = document.getElementById('username');
    const profilePicInput = document.getElementById('profilePic');
    const username = usernameInput.value;

    // Génération d'un UDID aléatoire de 6 chiffres
    const randomUdid = Math.floor(100000 + Math.random() * 900000);

    if (profilePicInput.files && profilePicInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(event) {
            const profilePicBase64 = event.target.result.split(',')[1];

            // Ajout des informations au local storage
            localStorage.setItem('id', randomUdid);
            localStorage.setItem('username', username);
            localStorage.setItem('profilePic', profilePicBase64);

            // Ajout de la date de création du compte
            const setupDate = new Date().toISOString();
            localStorage.setItem('setupDate', setupDate);

            window.location.href = 'setup/color.html'; // Redirection vers la page d'accueil après l'enregistrement
        };
        reader.readAsDataURL(profilePicInput.files[0]);
    } else {
        alert('Please select a profile picture.');
    }
});

if (!window.matchMedia('(display-mode: standalone)').matches) {
    document.getElementById('addPage').style.display = 'block';
}

    </script>
   
<script src="js/account.js"></script>
<script src="js/language.js"></script>
</body>
</html>
