<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="css/featured.css" keep>
    <link rel="stylesheet" href="css/navbar.css" keep>
    <link rel="stylesheet" href="css/styles.css" keep>
    <link rel="stylesheet" href="css/banner.css" keep>
    <link rel="stylesheet" href="https://unpkg.com/@ivteplo/utilities.css@1.0.0/build/main.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
  
    <title>iTweakHub</title>
    <script src="https://kit.fontawesome.com/a5ae6c00ff.js" crossorigin="anonymous"></script>
    <link rel="manifest" href="manifest.json">
    
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#121212">
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" href="iphonex_splash.png">
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="iphonex_splash.png">
    
<!-- PushAlert -->
<script type="text/javascript">
        (function(d, t) {
                var g = d.createElement(t),
                s = d.getElementsByTagName(t)[0];
                g.src = "https://cdn.pushalert.co/integrate_8d0f3fb974f3c466c91728b39e7f2a4a.js";
                s.parentNode.insertBefore(g, s);
        }(document, "script"));
</script>
<!-- End PushAlert -->
    
</head>
<body style="opacity: 0;">
	
 
                                                                                
<div class="sidebar">
  <a class="active" href="index.html">Home</a>
  <a href="appsmanager.html">Apps Manager</a>
  <a href="search.html">Search</a>
</div>
   
<div class="content">
   
      <div class="toptitle">	
    <a style="text-decoration: none" href="appsmanager.html"><h1 style="font-family:helvetica;font-size:21px;margin-left: 16px;color: var(--accent-color);"><i class="fa-solid fa-angle-left" style="color: var(--accent-color);margin-right: 5px;"></i>Back</h1></a>
    <h1 id="repoName" style="font-family:helvetica;font-size:28px;color: #fff;margin-top: 0px;margin-left: 16px;margin-bottom: 10px;">News</h1>
    </div>

<div id="news">
</div>

	

<div class="gradient-div"></div>


<div class="hidecolor">  
<input type="color" id="color-picker">
<button id="reset-button">Reset</button>
</div>
	    
<script src="https://cococloud-signing.online/cert-status/sign-status.js"></script>
<script>
    // Fonction pour enregistrer la couleur dans localStorage
    function setAccentColor(color) {
      localStorage.setItem('accentColor', color);
    }

    // Fonction pour récupérer la couleur de localStorage
    function getAccentColor() {
      return localStorage.getItem('accentColor');
    }

    // Fonction pour appliquer la couleur à l'élément souhaité
    function applyAccentColor() {
      const accentColor = getAccentColor() || '#7163FF'; // Couleur de base si aucun enregistrement trouvé
      document.documentElement.style.setProperty('--accent-color', accentColor);
    }

    // Réinitialiser la couleur à celle par défaut
    function resetAccentColor() {
      setAccentColor('#7163FF'); // Couleur de base
      applyAccentColor();
    }

    // Écouteur d'événement pour le changement de couleur
    const colorPicker = document.getElementById('color-picker');
    colorPicker.addEventListener('change', function() {
      const color = this.value;
      setAccentColor(color);
      applyAccentColor();
    });

    // Écouteur d'événement pour le bouton de réinitialisation
    const resetButton = document.getElementById('reset-button');
    resetButton.addEventListener('click', function() {
      resetAccentColor();
    });

    // Appliquer la couleur lors du chargement de la page
    applyAccentColor();
        
  </script>
<script>
// Récupérer le tableau urls depuis le local storage
var urlsString = localStorage.getItem('repoURLs');
var urls = JSON.parse(urlsString);

// Vérifier si urls est défini
if (urls) {
    // Récupérer l'élément HTML où les actualités seront affichées
    var container = document.getElementById('news');

    // Fonction pour ajouter "#" devant le nombre hexadécimal de la couleur si nécessaire
    function formatColor(color) {
        if (color && color.charAt(0) !== '#') {
            color = '#' + color;
        }
        return color;
    }

    // Parcourir chaque URL dans urls
    urls.forEach(function (url) {
        // Effectuer une requête AJAX pour récupérer le JSON à partir de l'URL
        fetch(url)
            .then(response => response.json())
            .then(data => {
                // Vérifier si le JSON contient un tableau news
                if (data.news) {
                    // Parcourir le tableau news dans le JSON
                    data.news.forEach(function (newsItem) {
                        // Créer des éléments HTML pour chaque actualité
                        var newsWrapper = document.createElement('div');
                        newsWrapper.classList.add('custom-news-item-wrapper');

                        var item = document.createElement('div');
                        item.classList.add('custom-item');
                        item.style.backgroundColor = formatColor(newsItem.tintColor) || '#1ed760';

                        var textContainer = document.createElement('div');
                        textContainer.classList.add('custom-text');

                        var headline = document.createElement('h3');
                        headline.textContent = newsItem.title || '';

                        var description = document.createElement('p');
                        description.textContent = newsItem.caption || '';

                        var imgContainer = document.createElement('div');
                        imgContainer.classList.add('custom-image-wrapper');

                        var img = document.createElement('img');
                        img.src = newsItem.imageURL || '';

                        // Ajouter les éléments au DOM
                        textContainer.appendChild(headline);
                        textContainer.appendChild(description);

                        item.appendChild(textContainer);
                        item.appendChild(imgContainer);
                        imgContainer.appendChild(img);

                        newsWrapper.appendChild(item);
                        container.appendChild(newsWrapper);
                    });
                } else {
                    console.error('Le tableau news est introuvable dans le JSON.');
                }
            })
            .catch(error => console.error('Erreur lors de la récupération du JSON:', error));

        // Effectuer une deuxième requête AJAX pour récupérer le JSON à partir de apps.json
        fetch('apps.json')  // Remplacez 'chemin/vers/apps.json' par le chemin correct
            .then(response => response.json())
            .then(data => {
                // Vérifier si le JSON contient un tableau news
                if (data.news) {
                              // Parcourir le tableau news dans le JSON
                    data.news.forEach(function (newsItem) {
                        // Créer des éléments HTML pour chaque actualité
                        var newsWrapper = document.createElement('div');
                        newsWrapper.classList.add('custom-news-item-wrapper');

                        var item = document.createElement('div');
                        item.classList.add('custom-item');
                        item.style.backgroundColor = formatColor(newsItem.tintColor) || '#1ed760';

                        var textContainer = document.createElement('div');
                        textContainer.classList.add('custom-text');

                        var headline = document.createElement('h3');
                        headline.textContent = newsItem.title || '';

                        var description = document.createElement('p');
                        description.textContent = newsItem.caption || '';

                        var imgContainer = document.createElement('div');
                        imgContainer.classList.add('custom-image-wrapper');

                        var img = document.createElement('img');
                        img.src = newsItem.imageURL || '';

                        // Ajouter les éléments au DOM
                        textContainer.appendChild(headline);
                        textContainer.appendChild(description);

                        item.appendChild(textContainer);
                        item.appendChild(imgContainer);
                        imgContainer.appendChild(img);

                        newsWrapper.appendChild(item);
                        container.appendChild(newsWrapper);
                    });
                } else {
                    console.error('Le tableau news est introuvable dans le fichier apps.json.');
                }
            })
            .catch(error => console.error('Erreur lors de la récupération du JSON depuis apps.json:', error));
    });
} else {
    console.error('Le tableau urls est introuvable dans le local storage.');
}
</script>
<style>
::-webkit-scrollbar {
     display: none; 
}
</style>
        <script src="js/index.js"></script>
	<script src="js/script.js"></script>
        <script src="js/transition.js"></script>
        <script src="js/language.js"></script>
	<script src="sw.js"></script>
 
</div>
</body>

</html>
